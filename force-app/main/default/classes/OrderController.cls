public with sharing class OrderController {
  @AuraEnabled(cacheable=true)
  public static Decimal getSumOrdersOfAccount(Id accountId) {
    System.debug('ðŸ“¨ [Apex] ReÃ§u accountId : ' + accountId);

    if (accountId == null) {
      throw new AuraHandledException('L\'ID du compte est requis.');
    }
    // comment2
    try {
      AggregateResult result = [
        SELECT SUM(TotalAmount) sumTotal
        FROM Order
        WHERE AccountId = :accountId AND Status = 'Activated'
      ];

      Decimal total = (Decimal) result.get('sumTotal');
      System.debug('ðŸ“Š [Apex] Total des commandes activÃ©es : ' + total);

      return total != null ? total : 0;
    } catch (Exception e) {
      System.debug('ðŸ”¥ [Apex] Erreur : ' + e.getMessage());
      throw new AuraHandledException(
        'Erreur lors de la rÃ©cupÃ©ration du chiffre d\'affaire : ' +
        e.getMessage()
      );
    }
  }
}
